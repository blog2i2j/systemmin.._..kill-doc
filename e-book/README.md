<p align="center"><strong>宗旨就是你能看到多少，就能下载多少，挑战不可能</strong><p>
<p align="center">
    <a>
        <img src="https://img.shields.io/badge/jspdf-v2.4.0-blue?style=flat-square" alt="jspdf-v2" />
    </a>
    <a>
        <img src="https://img.shields.io/badge/@zip.js-v2.7.34-blue?style=flat-square" alt="UW2eVx.png" />
    </a> 
	<a>
        <img src="https://img.shields.io/badge/@html2canvas-v1.4.1-blue?style=flat-square" alt="UW2eVx.png" />
    </a>
    <a>
    <img alt="license" src="https://img.shields.io/badge/license-Apache2.0-blue?style=flat-square">
    </a>
</p>


这是一个用于 [Tampermonkey](https://www.tampermonkey.net/) 或其他支持用户脚本的浏览器扩展的 [e-book](https://github.com/systemmin/kill-doc/blob/master/e-book/index.js) 篡改猴脚本。

电子书分页下载，考虑到文件大小内存等因素，采用分页下载。**请务必使用谷歌浏览器**

## 安装
1. 安装 [Tampermonkey](https://www.tampermonkey.net/) 浏览器扩展。[国内](https://www.crxsoso.com/webstore/detail/dhdgffkkebhmkfjojejmpbldmpobfkfo)安装
2. 点击 [脚本链接](https://greasyfork.org/zh-CN/scripts/497405-kill-e-book) 或手动复制脚本代码。
3. 在 Tampermonkey 中创建一个新脚本，将代码粘贴到编辑器中并保存。

## 留言

- **新增网站 [BASE64](https://base64.us/) 编码后**留言，留下网站首页以及文档详情页。

## 原理

常见在线预览文档技术原理：

- **提升图片质量与渲染速度**：对于将图片绘制成画布呈现的方式，可以通过优化图片压缩算法和提升渲染效率来改善用户体验。
- **增强二进制数据处理能力**：对于将二进制数据绘制到画布上的方法，可以优化数据处理逻辑，提高数据解析速度，减少延迟。
- **优化多种图片拼接技术**：在处理多种图片拼接页面渲染时，可以通过智能裁剪和图像处理技术，使页面渲染更加流畅和美观。
- **提高直接图片渲染的效率**：直接图片渲染可以减少数据转换环节，提高页面加载速度，同时可以通过懒加载等技术进一步提升性能。
- **改进矢量图片的拆分与定位技术**：拆分多个矢量小图片通过定位设置图片背景的方式，可以优化矢量图像的缩放和自适应，确保高质量的显示效果。
- **利用 `SVG` 和 `Blob Url`**：通过 `SVG` 渲染和 `Blob Url` 临时路径的方式，可以更好地支持动态和交互式的内容展示，同时保证文件的安全性。

⛔脚本只是将画布或图片在浏览器渲染时进行下载，拼接 PDF 文件，**无法下载原始文件，并非破解**。

## 平台

|                        **📖** 支持平台                        | 状态 | 速率 | 页码 | 页面容量 | 开始执行 | 结束执行 | 继续预览 | 停止预览 | 下载PDF |
| :----------------------------------------------------------: | :--: | ---- | :--: | :------: | :------: | :------: | :------: | -------- | ------- |
|  [文泉书局(北理工、华南农，湖南工业)](https://wqbook.wqxuetang.com/)   |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|            [高教书苑](https://ebook.hep.com.cn/)             |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|          [中教经典](https://www.zjjd.cn/zhongtufa/)          |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|               [可知](https://www.keledge.com/)               |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|          [先晓书院](https://xianxiao.ssap.com.cn/)           |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|        [工程科技（校）](https://ersp.lib.whu.edu.cn/)        |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|              [悦读（北理工）](https://yd.51zhy.cn)           |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|             [社会科学文库](https://www.sklib.cn)             |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|              [畅想之星](https://www.cxstar.com)              |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |
|                [书递](https://www.elib.link)                 |  ✅   | ✅    |  ✅   |    ✅     |    ✅     |    ✅     |    ✅     | ✅        | ✅       |

## 功能

1. `F5` 刷新能解决大部分问题。
2. 功能按钮需依次执行，需等待上一个功能执行完成再执行下一个功能。
3. 像这样（1）➡️（2）➡️（3）➡️（4）➡️（5）


| 功能          | 说明                                                         |
| ------------- | ------------------------------------------------------------ |
| （0）状态位   | 各个功能执行状态，当前进度。                                 |
| （1）速率     | 每页预览[所需时间](#速率)，鼠标点击一下该区域，然后再修改。  |
| （1）页码     | 从第几页开始执行                                             |
| （1）页面容量 | 每次预览多少页，达到指定页数自动下载一次                     |
| （2）开始执行 | 开始自动预览并分页下载                                       |
| （3）结束执行 | 终止，不可继续预览，清空缓存信息。要想开始点击“开始执行”     |
| （5）继续预览 | 停止预览后恢复按钮                                           |
| （4）停止预览 | 暂停一下，可以点击“继续预览”恢复                             |
| （6）下载PDF  | 一般情况不需手动下载，分页会自动下载。当测试暂停也可以自己下载 |

## 速率

该功能为了解决脚本运行速度过快（在此之前默认`800`毫秒一页），被平台检测到可能**导致封号**，已知文泉已出现封号情况。根据实际情况自行验证调整优化参数，该脚本并**未验证**是否一定有效解决封号风险，**出现风险由使用者承担**。

**支持两个种参数格式：**

1. 时间范围参数
   1. 支持浮点数就是小数
2. 固定时间参数

**示例参数：**

- `2-5`：时间 `2` 到 `5` 秒之间随机时间预览一页（默认参数）。
- `3`：固定时间 `3` 秒预览一页
- `0.5-3`：时间 `0.5`秒 到 `5` 秒之间随机时间预览一页。


## 使用

正常情况先设置好 `页码` 和 `页面容量`，再开始执行。有问题需要点击 “结束执行” 再 F5 刷新。

#### 预览速度太快问题

代码 `253` 行处、修改速率，单位毫秒，`1` 秒 = `1000`毫秒。自行修改

```js
loading = 800, // 毫秒
```

### 先晓书院

- 选择**原貌阅读**，请先调整预览界面大小再开始执行，否则下载的 `PDF ` 可能很模糊
- 右侧有 `+` `-` 放大和缩小按钮

### 社会科学文库

- 仅支持 PDF 格式

### 文泉书局

不是**真金白银**买的电子书慎用

```text
如果超出正常阅读速度下载文献就视为滥用，通常正常阅读一篇文献的速度至少需要几分钟
```

## 历史

- 2025/08/08 `v1.2.7` 解决文泉挂了问题

- 2024/06/30 `v1.0.3` 新增 高教书苑
- 2024/07/11 `v1.0.4` 新增 bit
- 2024/07/19 `v1.0.5` 新增 优化已知bug
- 2024/07/19 `v1.0.6` 新增 中教经典
- 2024/07/27 `v1.0.7` 新增 可知
- 2024/07/30 `v1.0.8` 新增 先晓书院
- 2024/08/07 `v1.0.9` 新增 工程科技
- 2024/08/07 `v1.1.0` 新增 悦读
- 2024/09/02 `v1.1.1` 新增 社会科学文库
- 2024/09/19 `v1.1.2` 新增 畅想之星
- 2024/09/19 `v1.1.3` 新增 书递；优化可知自动预览 bug
- 2024/10/08 `v1.1.4` 书递预览跳页问题处理
- 2025/01/10 `v1.1.5` 优化 先晓预览问题
- 2025/01/21 `v1.1.6` 新增 文泉（scau）
- 2025/02/06 `v1.1.7` 优化 社会科学文库
- 2025/02/16 `v1.1.8` 全部平台增加 速率 控制
- 2025/02/17 `v1.1.9` 新增 悦读（bit）
- 2025/02/19 `v1.2.0` 解决速率无法更新问题，默认一直2-5秒
- 2025/02/25 `v1.2.1` 文泉官方页面调整（02/23/2025 04:57:40）优化
- 2025/03/21 `v1.2.2` 增加悦读官网
- 2025/04/19 `v1.2.3` 优化可视窗口判断规则，高分辨率预览错误问题
- 2025/05/01 `v1.2.4` 可知自动预览 bug 优化
- 2025/05/10 `v1.2.5` 修改可视范围 bottom 错误
- 2025/07/31 `v1.2.6` 优化 CDN 引入 jspdf 问题
- 2025/08/08 `v1.2.7` 解决文泉挂了问题

## 贡献

我们欢迎任何形式的贡献，包括报告问题、提出建议、提交代码或文档。请参考[贡献指南](https://github.com/systemmin/kill-doc/issues)了解如何参与贡献。

## 授权

@license 篡改猴脚本遵循 [Apache-2.0](https://spdx.org/licenses/Apache-2.0.html)

## 兼容性

谷歌浏览器

## 注意事项

**注意：** 请确保遵循网站的使用条款和政策。自行承担风险。

- 本脚本完全免费。
- 仅供学习交流，严禁用于商业用途，请勿传播下载的数据。
- 本脚本所获取的资源完全合法，与浏览器能直接获得的资源一致，不存在逆向破解。
- 使用脚本造成的影响由使用者承担。

## 联系方式

如果您有任何问题或建议或合作或定制（有偿），请通过以下方式联系我们：

- 邮箱：[robots_user@qq.com](mailto:robots_user@qq.com)
- GitHub：[kill-doc](https://github.com/systemmin/kill-doc)

感谢使用篡改猴脚本！

## 鼓励作者

**您**的鼓励💪就是我前进得动力🫶鼓励方式有多种，选择你喜欢的😍，当然不鼓励也没关系哦！😄

- [好评 ](https://greasyfork.org/zh-CN/scripts/486211-%E6%9C%80%E5%BC%BA%E6%97%A0%E5%A5%97%E8%B7%AF%E8%84%9A%E6%9C%AC-%E4%BD%A0%E8%83%BD%E7%9C%8B%E8%A7%81%E5%A4%9A%E5%B0%91%E6%88%91%E8%83%BD%E4%B8%8B%E8%BD%BD%E5%A4%9A%E5%B0%91-%E4%B8%8B%E8%BD%BD%E5%85%AC%E5%BC%80%E5%85%8D%E8%B4%B9%E7%9A%84ppt-pdf-doc-txt%E7%AD%89%E6%96%87%E4%BB%B6/feedback)✍️
- [GitHub Start](https://github.com/systemmin/kill-doc)⭐
- 打赏💰（*量力而行，并不推荐*）
  - 大家赚钱老难了😭
  - 有钱谁用脚本啊！😲
  - 当然土豪可以随便赏小弟🤭

- [鸣谢](https://github.com/systemmin/kill-doc/blob/master/AMOUNT.md) 🫡

<img src="https://dtking.cn/pay.png" alt="赞赏" style="zoom: 67%;" />
